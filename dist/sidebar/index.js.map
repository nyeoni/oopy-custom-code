{
  "version": 3,
  "sources": ["../../src/lib/debounce.mjs", "../../src/sidebar/index.mjs"],
  "sourcesContent": ["/*\n * File: debounce.mjs\n * Project: oopy-custom-code\n * Created Date: 2022-08-03 04:42\n * Author: hostname (skdusdl8804@gmail.com)\n * -----\n * Last Modified: 2022-08-03 04:49\n * Modified By: Chloekkk\n * -----\n * Copyright (c) 2022 Chloekkk\n */\n\nexport default function debounce(func, delay = 100) {\n  let timer;\n  return function (...args) {\n    if (timer) clearTimeout(timer);\n    timer = setTimeout(() => func.apply(this, args), delay);\n  };\n}\n", "/*\n * File: index.mjs\n * Project: oopy-custom-code\n * Created Date: 2022-07-26 03:44\n * Author: hostname (skdusdl8804@gmail.com)\n * -----\n * Last Modified: 2022-08-03 04:49\n * Modified By: Chloekkk\n * -----\n * Copyright (c) 2022 Chloekkk\n */\n\nimport debounce from '../lib/debounce.mjs';\n\nconst PAGE = {\n  active: false,\n  headerHeight: 45,\n  elementTitle: {},\n  elementTCB: {},\n  elementCover: {},\n  tcbOriginStyle: '',\n  timer: () => {},\n};\nfunction getSidebarPosition() {\n  const offsetX =\n    Math.round((innerWidth - PAGE.elementTitle.offsetWidth) / 2) +\n    PAGE.elementTitle.offsetWidth;\n  const offsetY =\n    (PAGE.elementCover?.height ?? 0) + PAGE.headerHeight + PAGE.elementTitle.offsetHeight;\n  return { offsetX, offsetY };\n}\nfunction handleSidebarResponsiveChange() {\n  const { offsetX, offsetY } = getSidebarPosition();\n  const color = PAGE.elementTCB.childNodes[0].childNodes[0]?.style?.color;\n\n  if (offsetX - PAGE.elementTitle.offsetWidth > 150) {\n    PAGE.active = true;\n    PAGE.elementTCB.style.cssText = 'position: absolute;';\n    PAGE.elementTCB.style.cssText += `left: ${offsetX}px; top: ${offsetY}px; width: 240px;`;\n    PAGE.elementTCB.style.cssText += `border-left: medium solid ${\n      color ?? ''\n    }; padding-left: 1rem;`;\n  } else {\n    PAGE.active = false;\n    PAGE.elementTCB.style.cssText = '';\n    PAGE.elementTCB.style.cssText += PAGE.tcbOriginStyle;\n  }\n}\nfunction handleSidebarScrollChange() {\n  if (!PAGE.active) return;\n  if (PAGE.elementTCB.offsetTop + 128 <= window.scrollY) {\n    PAGE.elementTCB.style.cssText += 'position: fixed; top: 128px;';\n  } else {\n    const { offsetY } = getSidebarPosition();\n    PAGE.elementTCB.style.cssText += `position: absolute; top: ${offsetY}px;`;\n  }\n}\nexport default function sidebar() {\n  PAGE.elementTitle = document.getElementsByClassName('width')[0];\n  PAGE.elementTCB = document.getElementsByClassName(\n    'notion-table_of_contents-block'\n  )[0];\n  PAGE.elementCover = document.querySelector('img.page_cover');\n  PAGE.tcbOriginStyle = document.querySelector(\n    '.notion-table_of_contents-block'\n  ).style.cssText;\n  if (PAGE.elementTCB) {\n    handleSidebarResponsiveChange();\n  }\n\n  window.addEventListener('resize', debounce(handleSidebarResponsiveChange, 200));\n  window.addEventListener('scroll', handleSidebarScrollChange);\n}\n\ndocument.addEventListener('DOMContentLoaded', sidebar);\n"],
  "mappings": "MAYe,SAARA,EAA0BC,EAAMC,EAAQ,IAAK,CAClD,IAAIC,EACJ,OAAO,YAAaC,EAAM,CACpBD,GAAO,aAAaA,CAAK,EAC7BA,EAAQ,WAAW,IAAMF,EAAK,MAAM,KAAMG,CAAI,EAAGF,CAAK,CACxD,CACF,CCJA,IAAMG,EAAO,CACX,OAAQ,GACR,aAAc,GACd,aAAc,CAAC,EACf,WAAY,CAAC,EACb,aAAc,CAAC,EACf,eAAgB,GAChB,MAAO,IAAM,CAAC,CAChB,EACA,SAASC,GAAqB,CAC5B,IAAMC,EACJ,KAAK,OAAO,WAAaF,EAAK,aAAa,aAAe,CAAC,EAC3DA,EAAK,aAAa,YACdG,GACHH,EAAK,cAAc,QAAU,GAAKA,EAAK,aAAeA,EAAK,aAAa,aAC3E,MAAO,CAAE,QAAAE,EAAS,QAAAC,CAAQ,CAC5B,CACA,SAASC,GAAgC,CACvC,GAAM,CAAE,QAAAF,EAAS,QAAAC,CAAQ,EAAIF,EAAmB,EAC1CI,EAAQL,EAAK,WAAW,WAAW,GAAG,WAAW,IAAI,OAAO,MAE9DE,EAAUF,EAAK,aAAa,YAAc,KAC5CA,EAAK,OAAS,GACdA,EAAK,WAAW,MAAM,QAAU,sBAChCA,EAAK,WAAW,MAAM,SAAW,SAASE,aAAmBC,qBAC7DH,EAAK,WAAW,MAAM,SAAW,6BAC/BK,GAAS,4BAGXL,EAAK,OAAS,GACdA,EAAK,WAAW,MAAM,QAAU,GAChCA,EAAK,WAAW,MAAM,SAAWA,EAAK,eAE1C,CACA,SAASM,GAA4B,CACnC,GAAI,EAACN,EAAK,OACV,GAAIA,EAAK,WAAW,UAAY,KAAO,OAAO,QAC5CA,EAAK,WAAW,MAAM,SAAW,mCAC5B,CACL,GAAM,CAAE,QAAAG,CAAQ,EAAIF,EAAmB,EACvCD,EAAK,WAAW,MAAM,SAAW,4BAA4BG,MAC/D,CACF,CACe,SAARI,GAA2B,CAChCP,EAAK,aAAe,SAAS,uBAAuB,OAAO,EAAE,GAC7DA,EAAK,WAAa,SAAS,uBACzB,gCACF,EAAE,GACFA,EAAK,aAAe,SAAS,cAAc,gBAAgB,EAC3DA,EAAK,eAAiB,SAAS,cAC7B,iCACF,EAAE,MAAM,QACJA,EAAK,YACPI,EAA8B,EAGhC,OAAO,iBAAiB,SAAUI,EAASJ,EAA+B,GAAG,CAAC,EAC9E,OAAO,iBAAiB,SAAUE,CAAyB,CAC7D,CAEA,SAAS,iBAAiB,mBAAoBC,CAAO",
  "names": ["debounce", "func", "delay", "timer", "args", "PAGE", "getSidebarPosition", "offsetX", "offsetY", "handleSidebarResponsiveChange", "color", "handleSidebarScrollChange", "sidebar", "debounce"]
}
